<?xml version="1.0" encoding="utf-8"?>
<templates id="pms_pwa" xml:space="preserve">
    <t t-name="pms_pwa.roomdoo_chat_modal">
        <!-- Modal -->
        <t t-if="reservation">
            <!-- Modal chat -->
            <div class="modal o_pms_pwa_right fade o_pms_pwa_modal_chat" id="modalChat" tabindex="-1" role="dialog" aria-labelledby="modalChatLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header o_pms_pwa_modal_header">
                            <div class="col-12">
                                <div class="row o_pms_pwa_modal_header_pad">
                                    <script>
                                        $(".o_pms_pwa_return").click(function (event) {
                                            event.preventDefault();
                                            let reservation_id = event.target.getAttribute("data-id");
                                            $("div.o_pms_pwa_modal_chat").modal('hide');
                                            var new_selector = $('<td class="launch_modal" data-id="'+reservation_id+'">Pincha aqui</td>');
                                            new_selector.appendTo("table.launch_modal");
                                            $(new_selector).click();
                                            $(new_selector).remove();
                                        });
                                    </script>
                                    <a class="mr-4 o_pms_pwa_return" t-attf-data-id="{{reservation}}" href="#"><i class="fa fa-arrow-left"></i> Volver</a>
                                    <h4 class="modal-title">
                                        Mensajes
                                    </h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body o_pms_pwa_modal_body">

                            <div class="card card-bordered">

                                <div class="ps-container ps-theme-default ps-active-y" id="chat-content" style="overflow-y: scroll !important; height:75vh !important;">
                                    <t t-if="messages.message_folios.messages_list">
                                        <t t-foreach="messages.message_folios.messages_list" t-as="message">
                                            <div class="media media-chat">
                                                <img class="avatar" t-attf-src="data:image/png;base64,{{message.avatar}}" t-attf-alt="{{message.author}}" />
                                                <div class="media-body">
                                                    <p class="o_pms_pwa_author"><t t-esc="message.author"></t></p>
                                                    <t t-if="message.message_type == 'email'">
                                                        <p><t t-esc="message.subject" /></p>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-raw="message.message" />
                                                    </t>
                                                    <p class="meta"><time t-attf-datetime="{{message.date}}"><t t-esc="message.date" /></time></p>
                                                </div>
                                            </div>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <h5>No hay mensajes</h5>
                                    </t>
                                    <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: 0px;">
                                        <div class="ps-scrollbar-x" tabindex="0" style="left: 0px; width: 0px;"></div>
                                    </div>
                                    <div class="ps-scrollbar-y-rail" style="top: 0px; height: 0px; right: 2px;">
                                        <div class="ps-scrollbar-y" tabindex="0" style="top: 0px; height: 2px;"></div>
                                    </div>
                                </div>
                                <div class="publisher bt-1 border-light">
                                    <t t-if="messages.message_folios.allowed_cancellation_mail">
                                        <button
                                            class="btn btn-secondary o_pms_pwa_button_chat"
                                            style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;"
                                            type="button"
                                            t-attf-data-id="{{ reservation }}"
                                            t-attf-default-email="{{ default_email_to }}"
                                            t-attf-url="/reservation/{{ reservation }}/template_mail"
                                        > Cancelación</button>
                                    </t>
                                    <t t-if="messages.message_folios.allowed_confirmation_mail">
                                        <button
                                            class="btn btn-secondary o_pms_pwa_button_chat"
                                            style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;"
                                            type="button"
                                            t-attf-data-id="{{ reservation }}"
                                            t-attf-default-email="{{ default_email_to }}"
                                            t-attf-url="/reservation/{{ reservation }}/template_mail"
                                        > Confirmación</button>
                                    </t>
                                    <t t-if="messages.message_folios.allowed_departure_mail">
                                        <button
                                            class="btn btn-secondary o_pms_pwa_button_chat"
                                            style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;"
                                            type="button"
                                            t-attf-data-id="{{ reservation }}"
                                            t-attf-default-email="{{ default_email_to }}"
                                            t-attf-url="/reservation/{{ reservation }}/template_mail"
                                        > Salida</button>
                                    </t>
                                    <!-- <img class="avatar avatar-xs" src="https://img.icons8.com/color/36/000000/administrator-male.png" alt="..." />
                                    <input class="publisher-input" type="text" placeholder="Write something" />
                                    <a class="publisher-btn text-info" href="#" data-abc="true"><i class="fa fa-paper-plane"></i></a> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Modal -->
        </t>
    </t>
    <t t-name="pms_pwa.roomdoo_reservation_modal">
                <!-- Modal -->
        <t t-if="reservation">
            <div class="modal fade" id="multiChangeModal" tabindex="-2" role="dialog" aria-labelledby="multiChangeModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header o_pms_pwa_modal_header">
                    <h5 class="modal-title" id="multiChangeModalLabel">Modificar reservas seleccionadas</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span class="fa fa-times"></span>
                    </button>
                    </div>
                    <div class="modal-body">
                        <table class="table table-condensed" id="multi_days_values">
                            <thead>
                                <tr>
                                    <td class="o_pms_pwa_theme_color">Todos</td>
                                    <td class="o_pms_pwa_theme_color">Lunes</td>
                                    <td class="o_pms_pwa_theme_color">Martes</td>
                                    <td class="o_pms_pwa_theme_color">Miércoles</td>
                                    <td class="o_pms_pwa_theme_color">Jueves</td>
                                    <td class="o_pms_pwa_theme_color">Viernes</td>
                                    <td class="o_pms_pwa_theme_color">Sábado</td>
                                    <td class="o_pms_pwa_theme_color">Domingo</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <p style="text-align:center">
                                            <label class="switch">
                                                <input name="apply_on_all_week" data-edit="true" tabindex="1" type="checkbox" />
                                                <span class="slider round"></span>
                                            </label>
                                        </p>
                                    </td>
                                    <td>
                                        <p style="text-align:center">
                                            <label class="switch">
                                                <input data-edit="false" tabindex="2" name="apply_on_monday" type="checkbox" />
                                                <span class="slider round"></span>
                                            </label>
                                        </p>
                                    </td>
                                    <td>
                                        <p style="text-align:center">
                                            <label class="switch">
                                                <input data-edit="false" tabindex="3" name="apply_on_tuesday" type="checkbox" />
                                                <span class="slider round"></span>
                                            </label>
                                        </p>
                                    </td>
                                    <td>
                                        <p style="text-align:center">
                                            <label class="switch">
                                                <input data-edit="false" tabindex="4" name="apply_on_wednesday" type="checkbox" />
                                                <span class="slider round"></span>
                                            </label>
                                        </p>
                                    </td>
                                    <td>
                                        <p style="text-align:center">
                                            <label class="switch">
                                                <input data-edit="false" tabindex="5" name="apply_on_thursday" type="checkbox" />
                                                <span class="slider round"></span>
                                            </label>
                                        </p>
                                    </td>
                                    <td>
                                        <p style="text-align:center">
                                            <label class="switch">
                                                <input data-edit="false" tabindex="6" name="apply_on_friday" type="checkbox" />
                                                <span class="slider round"></span>
                                            </label>
                                        </p>
                                    </td>
                                    <td>
                                        <p style="text-align:center">
                                            <label class="switch">
                                                <input data-edit="false" tabindex="7" name="apply_on_saturday" type="checkbox" />
                                                <span class="slider round"></span>
                                            </label>
                                        </p>
                                    </td>
                                    <td>
                                        <p style="text-align:center">
                                            <label class="switch">
                                                <input data-edit="false" tabindex="8" name="apply_on_sunday" type="checkbox" />
                                                <span class="slider round"></span>
                                            </label>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="row">

                            <div class="col-5">
                                <label class="control-label col-12" for="Precio">
                                    Precio
                                </label>
                                <input class="form-control" type="number" name="new_price" />
                            </div>
                            <div class="col-5">
                                <label class="control-label col-12" for="Precio">
                                    Descuento
                                </label>
                                <input class="form-control" type="number" name="new_discount"></input>
                            </div>
                        </div>
                        <div class="row  mt-4">

                            <div class="col-5">
                                <label class="control-label col-12" for="board_service_room_id">
                                    Servicios
                                </label>
                                <select
                                    data-select="allowed_board_service_room_ids" class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="new_board_service_id">
                                    <option name="new_board_service_id" t-foreach="reservation.allowed_board_service_room_ids" t-as="key" t-att-value="key.id">
                                        <t t-esc="key.name" />
                                    </option>
                                </select>
                            </div>
                            <div class="col-5"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <!-- <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button> -->
                        <button type="button" class="btn bg-modal-action rounded-circle send_form_multi_change" url="/reservation/multi_changes">Guardar</button>
                    </div>
                </div>
                </div>
            </div>
            <div class="modal o_pms_pwa_right fade o_pms_pwa_reservation_modal" tabindex="-1" role="dialog" aria-labelledby="o_pms_pwa_reservation_modal" id="o_pms_pwa_reservation_modal" t-att-data-id="reservation.id">
                <div t-if="reservation.folio_reservations_count > 1" class="o_pms_pwa_multi_reservation_modal">
                    <div class="modal-header o_pms_pwa_modal_header">
                        <div class="row">
                            <div class="col-8">
                                <h3>Multiples reservas</h3>
                            </div>
                            <div class="col-4">
                                <div class="btn-group modal-btn-position">
                                    <button type="button" class="btn bg-modal-action rounded-circle" data-toggle="modal" data-target="#multiChangeModal">Modificar</button>
                                    <button type="button" class="btn fa fa-ellipsis-v" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                      <span class="sr-only">Acciones</span>
                                    </button>
                                    <div class="dropdown-menu">
                                      <a class="dropdown-item call_to_action_modal" href="#" url="/reservation/multi_assign">Asignar</a>
                                      <a class="dropdown-item call_to_action_modal" href="#" url="/reservation/multi_checkout">Checkout</a>
                                      <a class="dropdown-item call_to_action_modal" href="#" url="/checkins/pdf/multi_print">Imprimir Checkins</a>
                                      <div class="dropdown-divider"></div>
                                      <a class="dropdown-item call_to_action_modal" href="#" url="/reservation/multi_cancel">Cancelar</a>
                                    </div>
                                  </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-body o_pms_pwa_modal_body">
                        <table class="table table-condensed" id="multi_reservation_modal">
                            <thead>
                                <tr>
                                    <th class="o_pms_pwa_theme_color"><input type="checkbox" id="checkAll"></input></th>
                                    <th class="o_pms_pwa_theme_color">Reserva</th>
                                    <th class="o_pms_pwa_theme_color">Habitación</th>
                                    <th class="o_pms_pwa_theme_color">Adultos</th>
                                    <th class="o_pms_pwa_theme_color">Entrada</th>
                                    <th class="o_pms_pwa_theme_color">Salida</th>
                                </tr>

                            </thead>
                            <tbody>
                                <t t-foreach="reservation.folio_reservations" t-as="i">
                                    <tr t-attf-data-id="{{ i.id }}" t-att-class='reservation.id == i.id ? "o_pms_pwa_background_grey" : "" '>
                                        <td>
                                            <input type="checkbox" name="reservation_ids" checked="checked" t-if="reservation.id == i.id" t-attf-value="{{ i.id }}" />
                                            <input type="checkbox" name="reservation_ids" t-if="reservation.id != i.id" t-attf-value="{{ i.id }}" />
                                        </td>
                                        <td>
                                            <t t-if="reservation.id == i.id" t-esc="i.name"></t>
                                            <a t-if="reservation.id != i.id" t-attf-id="{{i.id}}" t-attf-data-id="{{i.id}}" href="#">
                                                <t t-esc="i.name"></t>
                                            </a>
                                        </td>
                                        <td>
                                            <select
                                                t-att-disabled='reservation.readonly_fields.indexOf("preferred_room_id") != -1 ? "disabled" : None'
                                                t-att-required='reservation.required_fields.indexOf("preferred_room_id") != -1 ? "required" : None'
                                                data-select="room_numbers" class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="preferred_room_id">
                                                <option t-foreach="i.room_numbers" t-as="key" t-att-value="key.id" t-att-selected="i.preferred_room_id.id === key.id ? 'selected' : None">
                                                    <t t-esc="key.name" />
                                                </option>
                                            </select>

                                        </td>
                                        <td>
                                            <input
                                                t-att-required='reservation.required_fields.indexOf("adults") != -1 ? "required" : None'
                                                t-att-readonly='reservation.readonly_fields.indexOf("adults") != -1 ? "readonly" : None'
                                                class="form-control" type="text" name="adults" t-att-value="i.adults" t-att-data-id="i.id" />
                                        </td>
                                        <td>
                                            <script>
                                                if (document.documentElement.lang === "es-ES") {
                                                    var format = 'dd/mm/yy';
                                                } else {
                                                    var format = 'mm/dd/yy';
                                                }
                                                $( function() {
                                                  $( "#checkindate<t t-esc='i.id'/>" ).datepicker({ dateFormat: format}).datepicker("setDate", '<t t-esc="i.checkin"/>');
                                                } );
                                            </script>
                                            <input class="form-control form-control-rdcd" t-attf-id="checkindate{{ i.id }}" type="text" name="checkin" t-attf-value="{{ i.checkin  }}" t-attf-data-range="{{ i.checkin }} - {{ i.checkout }}" t-field-options='{"widget": "date"}'/>

                                        </td>
                                        <td>
                                            <script>
                                                $( function() {
                                                  $( "#checkoutdate<t t-esc='i.id'/>" ).datepicker({ dateFormat: format}).datepicker("setDate", '<t t-esc="i.checkout"/>');
                                                } );
                                            </script>
                                            <input class="form-control form-control-rdcd" t-attf-id="checkoutdate{{ i.id }}" type="text" name="checkout" t-attf-value="{{ i.checkout }}" t-attf-data-range="{{ i.checkin }} - {{ i.checkout }}" t-field-options='{"widget": "date"}'/>

                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header o_pms_pwa_modal_header" style="padding-bottom:0px;">
                            <div class="col-sm-12">
                                <div class="row o_pms_pwa_modal_header_pad">
                                    <h4 class="col-6 modal-title">
                                        <t t-if="reservation.pms_property_id" t-esc="reservation.pms_property_id.name"/>
                                        <span t-esc="reservation.name" />
                                    </h4>
                                    <!-- <span t-esc="dict(reservation.fields_get(allfields=['state'])['state']['selection'])[reservation.state]"/> -->
                                    <!-- <a t-att-href="'/reservation/' + reservation.id" class="col-4 btn o_pms_pwa_btn_border float-right o_pms_pwa_preloader" t-att-data-id="reservation.id">
                                        <t t-esc="texts.info_text || _t('Más información')" />
                                    </a> -->
                                    <h5 class="col-4 modal-title"  style="float: right; text-align-last:end;">
                                        <t t-if="reservation.state == 'confirm'">
                                            <span class="label label-default">Confirmada</span>
                                        </t>
                                        <t t-if="reservation.state == 'arrival_delayed'">
                                            <span class="label label-default" style="color:#e37f01;">Llegada Retrasada</span>
                                        </t>
                                        <t t-if="reservation.state == 'departure_delayed'">
                                            <span class="label label-default" style="color:#e37f01;">Salida Retrasada</span>
                                        </t>
                                        <t t-if="reservation.state == 'draft'">
                                            <span class="label label-default" style="color:#a24680;">Presupuesto</span>
                                        </t>
                                        <t t-if="reservation.state == 'cancel'">
                                            <span class="label label-default" style="color:#bd0d0d;">Cancelada</span>
                                        </t>
                                        <t t-if="reservation.state == 'onboard'">
                                            <span class="label label-default" style="color:#00ba39;">Dentro</span>
                                        </t>
                                        <t t-if="reservation.state == 'done'">
                                            <span class="label label-default" style="color:#575757;">Finalizada</span>
                                        </t>
                                    </h5>
                                    <!-- <t t-if="reservation.to_send_mail == False and reservation.reservation_type != 'out'">
                                        <i class="fa fa-envelope" style="color:green;" title="Mail de confirmación enviado"></i>
                                    </t> -->
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span class="fa fa-times" />
                                    </button>
                                </div>
                            </div>
                            <div class="col-12 row o_pms_pwa_modal_buttons" style="margin:1px; margin-top:5px;">
                                <button
                                    class="col-3 btn btn-secondary o_pms_pwa_abutton o_pms_pwa_button_pagar"
                                    style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;"
                                    type="button"
                                    t-attf-data-id="{{ reservation.id }}"
                                    t-attf-url="/reservation/{{ reservation.id }}/payment"
                                >
                                    Cobros
                                </button>
                                <button
                                    class="col-3 btn btn-secondary o_pms_pwa_abutton o_pms_pwa_button_facturar"
                                    style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;"
                                    type="button"
                                    t-attf-data-id="{{ reservation.id }}"
                                    t-attf-url="/reservation/{{ reservation.id }}/payment"
                                >
                                    Facturas
                                </button>
                                <button
                                    class="col-3 btn btn-secondary o_pms_pwa_button_chat"
                                    style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;"
                                    type="button"
                                    t-attf-data-id="{{ reservation.id }}"
                                    t-attf-url="/reservation/{{ reservation.id }}/messages"
                                >
                                    Mensajes
                                </button>
                                <!-- <a
                                    t-att-href="'/reservation/' + reservation.id"
                                    style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;"
                                    class="col-3 btn btn-secondary o_pms_pwa_abutton o_pms_pwa_button_preloader"
                                    t-att-data-id="reservation.id"
                                >
                                    Ver Detalle
                                </a> -->
                                <a role="button" class="col-2 btn btn-secondary dropdown-toggle" style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;" data-toggle="dropdown" href="#" >
                                    Otros
                                </a>

                                <div class="dropdown-menu" aria-labelledby="dLabel">
                                    <!-- <button
                                        class="dropdown-item o_pms_pwa_abutton o_pms_pwa_button_facturar"
                                        type="button"
                                        t-att-data-id="reservation.id"
                                    >
                                        Facturas
                                    </button> -->
                                    <button
                                        class="dropdown-item o_pms_pwa_abutton o_pms_pwa_button_new_reservation"
                                        t-att-data-folio_id="reservation.folio_id.id"
                                        type="button"
                                    >
                                        Añadir habitación
                                    </button>
                                    <button
                                        class="dropdown-item o_pms_pwa_abutton o_pms_pwa_button_cancelar"
                                        type="button"
                                        t-attf-data-id="{{ reservation.id }}"
                                        t-attf-url="/reservation/{{ reservation.id }}/cancel"
                                    >
                                        Cancelar
                                    </button>
                                    <button
                                        class="dropdown-item o_pms_pwa_abutton o_pms_pwa_button_refund"
                                        type="button"
                                        t-attf-data-id="{{ reservation.id }}"
                                        t-attf-url="/reservation/{{ reservation.id }}/refund"
                                    >
                                        Devolución
                                    </button>
                                </div>

                                <!-- <div class="col-sm-4">
                                    <t t-raw="reservation.primary_button" />
                                </div>
                                <div class="col-sm-4" style="text-align: inline-end;">
                                    <span class="dropdown">
                                        <a role="button" class="btn btn-secondary dropdown-toggle" style="max_width:30%;" data-toggle="dropdown" href="#" >Otras opciones</a>

                                        <div class="dropdown-menu" aria-labelledby="dLabel">
                                            <t t-raw="reservation.secondary_buttons" />
                                            <button class="dropdown-item o_pms_pwa_abutton o_pms_pwa_button_new_reservation" t-att-data-folio_id="reservation.folio_id.id" type="button">Añadir habitación</button>
                                        </div>
                                    </span>
                                </div> -->
                            </div>
                        </div>
                        <div class="modal-body o_pms_pwa_modal_body">

                            <div class="o_pms_pwa_shadow">
                                <div class="row" >
                                    <div class="col-3 align-self-center o_pms_pwa_partner_edit o_pms_pwa_partner_modal_show" t-attf-data-partner-id="{{ reservation.partner_id.id or 0 }}" t-attf-data-reservation-id="{{ reservation.id }}">
                                        <img t-att-src="'/web/image/pms.reservation/'+reservation.id+'/partner_image_128'" class="img-thumbnail rounded-circle o_pms_pwa_img_rounded_bg o_pms_pwa_partner_icon" t-att-title="reservation.partner_id.name" t-att-alt="reservation.partner_id.name" width="55" />
                                        <img t-att-src="'/pms_pwa/static/img/svg/edit_partner.svg'" class="img-thumbnail rounded-circle o_pms_pwa_img_rounded_bg o_pms_pwa_partner_edit" t-att-title="reservation.partner_id.name" t-att-alt="reservation.partner_id.name" width="55" />
                                    </div>
                                    <div class="col-6 ">
                                        <div class="row">
                                            <div class="col-12">
                                                <strong>
                                                    <span class="o_pms_pwa_reservation_name" t-esc="reservation.partner_id.name" />
                                                </strong>
                                            </div>
                                            <div class="col-12" style="margin-top:-0.5rem">
                                                <a t-att-href="'tel:' + reservation.partner_id.mobile">
                                                    <span class="o_pms_pwa_reservation_anchor" t-esc="reservation.partner_id.mobile" />
                                                </a>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="col-3 align-self-center">
                                        <img t-if="reservation.agency_id and reservation.agency_id.id" style="float:right;border:0;" class="img-thumbnail" t-att-src="'/web/image/res.partner/'+reservation.agency_id.id+'/image_128'" width="60" t-att-title="reservation.agency_id.name" t-att-alt="reservation.agency_id.name" />
                                        <span t-else="">
                                            <span t-if="reservation.channel_type_id" t-esc="reservation.channel_type_id.name" />
                                        </span>
                                    </div>
                                </div>
                                <div class="progress mt-2">
                                    <div t-if="reservation.state == 'onboard'" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.checkins_ratio + '%'" t-att-aria-valuenow="reservation.checkins_ratio" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'cancel' or reservation.state == 'done' or reservation.state == 'no_show' or reservation.state ==  'no_checkout'" class="progress-bar bg-light" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &gt; 75" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and 75 &gt; reservation.ratio_checkin_data &gt; 50" class="progress-bar bg-warning" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &lt; 50" class="progress-bar bg-danger" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-else="" class="progress-bar" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div t-if="reservation.unread_msg and reservation.unread_msg &gt; 0 and reservation.messages" class="row">
                                    <div class="col-12">
                                        <button class="btn o_pms_pwa_messages collapsed mt-2" aria-controls="#collapseMessages" data-target="#collapseMessages" type="button" data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
                                            <span data-toggle="tooltip" t-att-title="texts.unread_text || _t('Notas internas')" class="badge bg-red mr-2" t-att-data-original-title="texts.unread_text || _t('Notas internas')">
                                                <t t-esc="reservation.unread_msg" />
                                            </span>
                                            <t t-esc="texts.unread_text || _t('Notas internas')" />
                                            <div class="collapse" id="collapseMessages">
                                                <div class="card card-body">
                                                    <span class="mb-2" t-foreach="reservation.messages" t-as="key" t-att-value="key">
                                                        <h4 class="o_pms_pwa_blue">
                                                            <t t-esc="key['title']" />
                                                            <i class="fa fa-check-square-o float-right"></i>
                                                        </h4>
                                                        <p>
                                                            <t t-esc="key['content']" />
                                                        </p>
                                                    </span>
                                                </div>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 o_pms_pwa_modal_buttons" style="margin:2px; margin-top:10px;">
                                <button class="col-8 btn btno_pms_pwa_modal_buttons-persona-info dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                style="color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;"
                                >
                                    <span data-toggle="tooltip" title="Guest personal data" class="badge bg-black mr-2" data-original-title="Guest personal data">
                                        <t t-esc="reservation.adults" />
                                    </span>
                                    Hacer Checkins
                                </button>
                                <div class="dropdown-menu btn-persona-info-item" aria-labelledby="dropdownMenuButton">
                                    <t t-foreach="reservation.checkin_partner_ids" t-as="person">
                                        <a class="dropdown-item o_pms_pwa_button_checkins" t-attf-data-id="{{ reservation.id }}" t-attf-url="/reservation/{{ reservation.id }}/checkin" t-attf-data-target="#checkin_partner_{{person.id}}">
                                            <t t-if="person_value['firstname']">
                                                <t t-esc="person_value['firstname']" /> <t t-esc="person_value['lastname']" />
                                            </t>
                                            <t t-else="">
                                                Introducir datos de huésped
                                            </t>
                                        </a>
                                    </t>
                                </div>
                                <button
                                    class="col-3 btn btn-secondary o_pms_pwa_abutton o_pms_pwa_button_checkout"
                                    style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc;"
                                    type="button"
                                    t-attf-data-id="{{ reservation.id }}"
                                    t-attf-url="/reservation/{{ reservation.id }}/checkout"
                                >
                                    <i class="fa fa-sign-out"></i> Out
                                </button>
                            </div>
                            <!-- Form action needs to be updated with the real action -->
                            <form class="mt-2 o_pms_pwa_reservation_form" target="_self" t-att-action="'/reservation/'+reservation.id" method="post">

                                <div class="form-group form-field mt8">
                                    <div class="row">
                                        <div class="col-12">
                                            <label class="control-label col-sm-12" for="checkin">
                                                Fecha de entrada - Fecha de salida
                                            </label>
                                            <input
                                                t-att-readonly='reservation.readonly_fields.indexOf("checkin") != -1 ? "readonly" : None'
                                                t-att-name='reservation.readonly_fields.indexOf("checkin") == -1 ? "range_check_date_modal" : None'
                                                class="form-control" type="text" t-attf-value="{{ reservation.checkin }} - {{ reservation.checkout }}" />
                                            <input type="hidden" name="checkin" t-att-value="reservation.checkin" />
                                            <input type="hidden" name="checkout" t-att-value="reservation.checkout" />
                                            <span class="o_pms_pwa_calendar_icon">
                                                <!-- <span class="fa fa-calendar"/> -->
                                                <img src="/pms_pwa/static/img/svg/calendario-azul.svg" alt="calendar icon" title="calendar" width="20" />
                                            </span>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-sm-5">
                                            <label class="control-label col-sm-12" for="preferred_room_id">
                                                <t t-esc="texts.room_number_text || _t('Nº habitación')" />
                                            </label>
                                            <select
                                                t-att-disabled='reservation.readonly_fields.indexOf("preferred_room_id") != -1 ? "disabled" : None'
                                                t-att-required='reservation.required_fields.indexOf("preferred_room_id") != -1 ? "required" : None'
                                                data-select="room_numbers" class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="preferred_room_id">
                                                <option t-foreach="reservation.room_numbers" t-as="key" t-att-value="key.id" t-att-selected="reservation.preferred_room_id.id === key.id ? 'selected' : None">
                                                    <t t-esc="key.name" />
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-sm-1 o_pms_pwa_modal_buttons" style="padding-left:0;">
                                            <button
                                                t-if="reservation.to_assign"
                                                class="btn btn-secondary o_pms_pwa_abutton o_pms_pwa_button_asignar"
                                                style="margin:1px; color: #01b6e3; border-color: #01b6e3; background-color: #daf7fc; margin-lef:-20px !important;"
                                                type="button"
                                                t-attf-data-id="{{ reservation.id }}"
                                                t-attf-url="/reservation/{{ reservation.id }}/assign"
                                            >
                                                <span class="fa fa-cloud-download" style="color:#ed722e;" />
                                            </button>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="control-label col-sm-12" for="room_type_id">
                                                <t t-esc="texts.room_type_text || _t('Tipo de habitación')" />
                                            </label>
                                            <select
                                                t-att-disabled='reservation.readonly_fields.indexOf("room_type_id") != -1 ? "disabled" : None'
                                                t-att-required='reservation.required_fields.indexOf("room_type_id") != -1 ? "required" : None'
                                                data-select="room_types" class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="room_type_id">
                                                <option t-foreach="reservation.room_types" t-as="key" t-att-value="key.id" t-att-selected="reservation.room_type_id.id === key.id ? 'selected' : None">
                                                    <t t-esc="key.name" />
                                                </option>
                                            </select>
                                        </div>

                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-sm-3 o_pms_pwa_buttons_min_max">
                                            <label class="control-label col-12" for="adults">
                                                <t t-esc="texts.adults_number_text || _t('Adultos')" />
                                            </label>
                                            <a href="#" class="btn btn-o_pms_pwa_min_max" onclick="document.getElementById('adults').stepDown(1)" data-adults="adults" t-att-data-id="reservation.id">-</a>
                                            <input readonly="readonly" class="o_pms_pwa_num-control" type="number" id="adults" name="adults" min="1" t-att-max="reservation.max_adults" t-att-value="reservation.adults || 0" />
                                            <a href="#" class="btn btn-o_pms_pwa_min_max" onclick="document.getElementById('adults').stepUp(1)" data-adults="adults" t-att-data-id="reservation.id">+</a>
                                        </div>
                                        <div class="col-sm-3 o_pms_pwa_buttons_min_max">
                                            <label class="control-label col-12" for="kids">
                                                Niños
                                            </label>
                                            <a href="#" class="btn btn-o_pms_pwa_min_max" onclick="document.getElementById('kids').stepDown(1)"  data-adults="kids" t-att-data-id="reservation.id">-</a>
                                            <input readonly="readonly" class="o_pms_pwa_num-control" type="number" id="kids" name="kids" min="0" t-att-max="reservation.max_kids" t-att-value="reservation.kids || 0" />
                                            <a href="#" class="btn btn-o_pms_pwa_min_max" onclick="document.getElementById('kids').stepUp(1)"  data-adults="kids" t-att-data-id="reservation.id">+</a>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="control-label col-12" for="pricelist_id">
                                                Tarifa
                                            </label>
                                            <select
                                                t-att-disabled='reservation.readonly_fields.indexOf("pricelist_id") != -1 ? "disabled" : None'
                                                t-att-required='reservation.required_fields.indexOf("pricelist_id") != -1 ? "required" : None'
                                                data-select="allowed_pricelists" class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="pricelist_id">
                                                <option t-foreach="reservation.allowed_pricelists" t-as="key" t-att-value="key.id" t-att-selected="reservation.pricelist_id.id === key.id ? 'selected' : None">
                                                    <t t-esc="key.name" />
                                                </option>
                                            </select>
                                        </div>

                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-sm-6">
                                            <label class="control-label col-12" for="board_service_room_id">
                                                Régimen
                                            </label>
                                            <select
                                                t-att-disabled='reservation.readonly_fields.indexOf("board_service_room_id") != -1 ? "disabled" : None'
                                                t-att-required='reservation.required_fields.indexOf("board_service_room_id") != -1 ? "required" : None'
                                                data-select="allowed_board_service_room_ids" class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="board_service_room_id">
                                                <option name="board_service_room_id" t-foreach="reservation.allowed_board_service_room_ids" t-as="key" t-att-value="key.id" t-att-selected="reservation.board_service_room_id.id === key.id ? 'selected' : None">
                                                    <t t-esc="key.name" />
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="control-label col-12" for="nights">
                                                <t t-esc="texts.nights_number_text || _t('Noches')" />
                                            </label>
                                            <input
                                                t-att-required='reservation.required_fields.indexOf("nights") != -1 ? "required" : None'
                                                t-att-readonly='reservation.readonly_fields.indexOf("nights") != -1 ? "readonly" : None'
                                                class="form-control" type="text" name="nights" t-att-value="reservation.nights" disabled="disabled" />
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-sm-6">
                                            <label class="control-label col-12" for="arrival_hour">
                                                <t t-esc="texts.check_in_time_text || _t('Hora de entrada')" />
                                            </label>
                                            <input
                                                t-att-required='reservation.required_fields.indexOf("arrival_hour") != -1 ? "required" : None'
                                                t-att-readonly='reservation.readonly_fields.indexOf("arrival_hour") != -1 ? "readonly" : None'
                                                class="form-control" type="time" name="arrival_hour" t-att-value="reservation.arrival_hour" />
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="control-label col-12" for="departure_hour">
                                                <t t-esc="texts.check_out_time_text || _t('Hora de salida')" />
                                            </label>
                                            <input
                                                t-att-required='reservation.required_fields.indexOf("departure_hour") != -1 ? "required" : None'
                                                t-att-readonly='reservation.readonly_fields.indexOf("departure_hour") != -1 ? "readonly" : None'
                                                class="form-control" type="time" name="departure_hour" t-att-value="reservation.departure_hour" />
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <!-- <div class="col-sm-6">
                                            <label class="control-label col-12" for="price_total">
                                                <t t-esc="texts.total_text || _t('Total')"/>
                                            </label>
                                            <input class="form-control" type="text" name="price_total" t-att-value="reservation.price_total" />
                                        </div> -->
                                        <div class="col-sm-12 mt-3">
                                            <h4 data-toggle="collapse" data-target="#collapse_price_nights" id="price_nights" >
                                                <i class="fa fa-pencil-square-o" aria-hidden="false" />
                                                Precio/Noche
                                                <i class="fa fa-angle-down rotate-icon" />
                                            </h4>
                                            <div id="collapse_price_nights" class="collapse" aria-labelledby="headingOne">
                                                <table class="table table-condensed">
                                                    <thead>

                                                        <tr>
                                                            <th class="o_pms_pwa_theme_color">Día</th>
                                                            <th class="o_pms_pwa_theme_color">Precio</th>
                                                            <th class="o_pms_pwa_theme_color">Descuento (%)</th>
                                                        </tr>

                                                    </thead>
                                                    <tbody>
                                                        <t t-foreach="reservation.reservation_line_ids" t-as="i">
                                                            <tr>
                                                                <td>
                                                                    <t t-esc="i_value['date']" t-options='{"widget":"date"}' />
                                                                </td>
                                                                <td>
                                                                    <input type="number" t-attf-data-main_field="reservation_line_ids" t-attf-data-field_id="{{i}}" name="price" t-att-value="i_value['price']" class="form-control o_pms_pwa_modal_number" />
                                                                </td>
                                                                <td>
                                                                    <input type="number" t-attf-data-main_field="reservation_line_ids" t-attf-data-field_id="{{i}}" name="discount" t-att-value="i_value['discount']" class="form-control o_pms_pwa_modal_number" />
                                                                </td>
                                                            </tr>
                                                        </t>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="form-group form-field">
                                    <div class="row">
                                        <div class="col-12">
                                            <label
                                                class="control-label col-12"
                                                for="room_price"
                                            >
                                                <t
                                                    t-esc="texts.room_price_text || _t('Precio de habitación')"
                                                />
                                            </label>
                                            <input
                                                class="form-control"
                                                type="text"
                                                name="room_price"
                                                t-att-value="reservation.folio_id.amount_total.value"
                                            />
                                        </div>
                                    </div>
                                </div> -->

                                <div class="form-group form-field o_pms_pwa_group_separation">
                                    <div class="row m-3">

                                        <t t-foreach="reservation.service_ids" t-as="service">
                                            <input type="hidden" t-attf-name="o_pms_pwa_service_line_{{service}}" t-attf-value="{{service}}" />
                                            <div class="col-sm-12">

                                                <div class="form-check" t-if="service_value.service_line_ids">
                                                    <input class="o_pms_pwa_checkbox" type="checkbox" checked="checked" t-att-data-service_id="service" t-attf-id="defaultCheck{{service}}" data-toggle='collapse' t-attf-data-target='#collapsediv{{service}}' aria-expanded="true" t-attf-aria-controls="collapsediv{{service}}" />
                                                    <label class="o_pms_pwa_checkbox_label" t-attf-for="defaultCheck{{service}}">
                                                        <t t-esc="service_value.product_id" />
                                                    </label>
                                                    <div t-attf-id='collapsediv{{service}}' class='o_pms_pwa_collapse collapse show'>
                                                        <div class="o_pms_pwa_collapse_content mt-3">
                                                            <br />
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th class="o_pms_pwa_detail_th">Fecha</th>
                                                                        <th class="o_pms_pwa_detail_th">Cantidad</th>
                                                                        <th class="o_pms_pwa_detail_th" style="padding-left:0;">Precio Ud.</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <t t-foreach="service_value.service_line_ids" t-as="s">
                                                                        <tr t-attf-class="o_roomdoo_hide_show_service_{{service}}">
                                                                            <td class="o_pms_pwa_detail_td">
                                                                                <span t-esc="s_value.date" t-options='{"widget":"date"}' />
                                                                            </td>
                                                                            <td class="o_pms_pwa_detail_td o_pms_pwa_td_rb">
                                                                                <div class="o_pms_pwa_rb_box">
                                                                                    <div class="o_pms_pwa_rb">
                                                                                        <div class="o_pms_pwa_rb_tab o_pms_pwa_rb_remove" t-attf-data-reservation-id="{{ reservation.id }}" t-attf-data-id="{{ s }}" t-attf-data-service-id="{{ service }}">
                                                                                            <div class="o_pms_pwa_rb_spot">
                                                                                                <span class="o_pms_pwa_rb_txt">
                                                                                                X
                                                                                            </span>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="o_pms_pwa_rb_tab o_pms_pwa_rb_tab_active">
                                                                                            <div class="o_pms_pwa_rb_spot">
                                                                                                <span t-attf-class="o_pms_pwa_rb_txt o_pms_pwa_rb_value_{{ s }}">
                                                                                                    <t t-esc="s_value.day_qty" />
                                                                                                </span>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="o_pms_pwa_rb_tab o_pms_pwa_rb_edit" data-toggle="modal" data-target="#o_pms_pwa_editModal" t-attf-data-reservation-id="{{ reservation.id }}" t-attf-data-service-id="{{ service }}" t-attf-data-id="{{ s }}">
                                                                                            <div class="o_pms_pwa_rb_spot">
                                                                                                <span class="o_pms_pwa_rb_txt">
                                                                                                    <i class="fa fa-edit"></i>
                                                                                                </span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <input type="number" t-attf-data-main_field="service_ids" t-attf-data-subservice_field_id="{{s}}" data-subservice_name="service_line_ids" t-attf-data-field_id="{{ service }}" t-attf-id="price_{{ service }}_{{ s }}" name="price_unit" t-attf-value="{{ s_value.price_unit }}" class="form-control o_pms_pwa_modal_number" />
                                                                            </td>
                                                                        </tr>

                                                                    </t>
                                                                </tbody>
                                                            </table>
                                                            <br />
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div class="form-check mt-2" t-if="service.service_line_ids==''">
                                                    <input class="o_pms_pwa_checkbox" type="checkbox" id="defaultCheck2" checked="checked" />
                                                    <label class="o_pms_pwa_checkbox_label" for="defaultCheck2">
                                                        <t t-esc="service.product_id.name" />
                                                    </label>
                                                </div> -->
                                            </div>
                                            <div class="col-sm-12 mt-2">
                                                <div class="o_roomdoo_hide_show-services-more o_roomdoo_hide_show-more2" t-attf-data-service-id="{{service}}">Ver más</div>
                                            </div>
                                        </t>
                                        <input type="hidden" name="reservation_extras" />
                                        <!-- <div class="form-check mt-2">
                                                <a class="o_pms_pwa_extras" href="#">Más extras</a>
                                            </div> -->
                                    </div>
                                    <div class="row mt-4">
                                        <div class="col-sm-12">
                                            <label class="control-label col-12" for="add_service">
                                                Añadir servicio
                                            </label>
                                            <select class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="add_service">

                                                <option t-foreach="reservation.allowed_service_ids" t-as="key" t-att-value="key_value.id">
                                                    <t t-esc="key_value.name" t-att-data-service_id="key_value.id" />
                                                </option>

                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-sm-12">
                                            <label class="control-label col-12" for="reservation_type">
                                                <t t-esc="_t('Tipo de reserva')" />
                                            </label>
                                            <select
                                                t-att-disabled='reservation.readonly_fields.indexOf("reservation_type") != -1 ? "disabled" : None'
                                                t-att-required='reservation.required_fields.indexOf("reservation_type") != -1 ? "required" : None'
                                                class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="reservation_type">
                                                <option t-foreach="reservation.reservation_types" t-as="key" t-att-value="key.id" t-att-selected="reservation.reservation_type === key.id ? 'selected' : None">
                                                    <t t-esc="key.name" />
                                                </option>
                                            </select>
                                        </div>

                                    </div>
                                    <div class="row mt-4">
                                        <div class="col-sm-12">
                                            <select data-select="allowed_segmentations" multiple="true" data-style="form-control o_pms_pwa_multiselect" class="selectpicker w-100" data-live-search="true" name="segmentation_ids" title="Motivo viaje" />
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group form-field o_pms_pwa_group_separation">

                                    <div class="o_pms_pwa_shadow mt-3">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <div class="row mx-2">
                                                    <div class="o_pms_pwa_total_title col-12">
                                                        <t t-esc="texts.total_text || _t('Precio total reserva')" />
                                                    </div>
                                                    <div class="o_pms_pwa_total_price col-12">
                                                        <strong t-esc="reservation.price_total" class="price_total" />
                                                        <span>
                                                            (
                                                            <t t-esc="reservation.price_tax" />
                                                            iva)
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="row mx-2">
                                                    <div class="o_pms_pwa_total_title col-12">
                                                        <t t-esc="texts.outstading_text || _t('Importe pendiente')" />
                                                    </div>
                                                    <div class="o_pms_pwa_total_price col-12">
                                                        <strong t-esc="reservation.folio_pending_amount" class="pending_amount" />

                                                        <!-- <span>
                                                            (
                                                            <t t-esc="reservation.folio_id.outstanding_vat" />
                                                            € vat)
                                                        </span> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                </div>

                                <div class="row mt-4" t-if="reservation.folio_internal_comment">
                                    <div class="col-sm-12">
                                        <h4>
                                            <t t-esc="texts.notes_text || _t('Observaciones')" />
                                        </h4>
                                        <div>
                                            <t t-esc="reservation.folio_internal_comment" />
                                        </div>
                                    </div>
                                </div>


                            </form>
                        </div>
                    </div>
                    <!-- modal-content -->
                </div>
                <!-- modal-dialog -->
            </div>
            <!-- modal -->
        </t>
    </t>

    <t t-name="pms_pwa.reservation_checkout_modal">
        <t t-if="reservation">
            <div class="modal o_pms_pwa_right fade o_pms_pwa_reservation_modal" tabindex="-1" role="dialog" aria-labelledby="o_pms_pwa_reservation_modal">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header o_pms_pwa_modal_header">
                            <div class="col-12">
                                <div class="row o_pms_pwa_modal_header_pad">
                                    <script>
                                        $(".o_pms_pwa_return").click(function (event) {
                                            event.preventDefault();
                                            let reservation_id = event.target.getAttribute("data-id");
                                            $("div.o_pms_pwa_new_reservation_modal").modal('hide');
                                            var new_selector = $('<td class="launch_modal" data-id="'+reservation_id+'">Pincha aqui</td>');
                                            new_selector.appendTo("table.launch_modal");
                                            $(new_selector).click();
                                            $(new_selector).remove();
                                        });
                                    </script>
                                    <a class="mr-4 o_pms_pwa_return" t-attf-data-id="{{reservation.id}}" href="#"><i class="fa fa-arrow-left"></i> Volver</a>
                                    <h4 class="modal-title">
                                        Checkout reserva:
                                        <span t-esc="reservation.name" />
                                    </h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body o_pms_pwa_modal_body">
                            <div class="o_pms_pwa_shadow">
                                <div class="row">
                                    <div class="col-3 align-self-center">
                                        <img t-att-src="'/web/image/pms.reservation/'+reservation.id+'/partner_image_128'" class="img-thumbnail rounded-circle o_pms_pwa_img_rounded_bg" t-att-title="reservation.partner_id.name" t-att-alt="reservation.partner_id.name" width="55" />
                                    </div>
                                    <div class="col-9 ">
                                        <div class="row">
                                            <div class="col-12">
                                                <strong>
                                                    <span class="o_pms_pwa_reservation_name" t-esc="reservation.partner_id.name" />
                                                </strong>
                                            </div>
                                            <div class="col-12" style="margin-top:-0.5rem">
                                                <a t-att-href="'tel:' + reservation.partner_id.mobile">
                                                    <span class="o_pms_pwa_reservation_anchor" t-esc="reservation.partner_id.mobile" />
                                                </a>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="progress mt-2">
                                    <div t-if="reservation.state == 'onboard'" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.checkins_ratio + '%'" t-att-aria-valuenow="reservation.checkins_ratio" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'cancel' or reservation.state == 'done' or reservation.state == 'no_show' or reservation.state ==  'no_checkout'" class="progress-bar bg-light" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &gt; 75" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and 75 &gt; reservation.ratio_checkin_data &gt; 50" class="progress-bar bg-warning" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &lt; 50" class="progress-bar bg-danger" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-else="" class="progress-bar" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div class="mt-4">
                                        <h5>¿Está seguro de que desea pagar esta reserva? </h5>
                                        <p>
                                            <strong>Nombre:</strong>
                                            <t t-esc="reservation.partner_id.name" />
                                        </p>
                                        <p>
                                            <strong>Noches:</strong>
                                            <t t-esc="reservation.nights" />
                                        </p>
                                        <p>
                                            <strong>Adultos:</strong>
                                            <t t-esc="reservation.adults" />
                                        </p>
                                        <p>
                                            <strong>Importe pendiente:</strong>
                                            <t t-esc="reservation.folio_pending_amount" />
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <button type="button" class="btn btn-block o_pms_pwa_btn_border" data-dismiss="modal" aria-label="Close">
                                        <span>Cerrar</span>
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button type="button" t-att-url="'/reservation/' + reservation.id +'/checkout'" class="btn btn-message btn-block o_pms_pwa_button_checkout_confirm" data-dismiss="modal" aria-label="Checkout">
                                        <span>Checkout</span>
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!-- modal-content -->
                </div>
                <!-- modal-dialog -->
            </div>
        </t>
    </t>

    <t t-name="pms_pwa.reservation_cancel_modal">
        <t t-if="reservation">
            <div class="modal o_pms_pwa_right fade o_pms_pwa_reservation_modal" tabindex="-1" role="dialog" aria-labelledby="o_pms_pwa_reservation_modal">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header o_pms_pwa_modal_header">
                            <div class="col-12">
                                <div class="row o_pms_pwa_modal_header_pad">
                                    <script>
                                        $(".o_pms_pwa_return").click(function (event) {
                                            event.preventDefault();
                                            let reservation_id = event.target.getAttribute("data-id");
                                            $("div.o_pms_pwa_new_reservation_modal").modal('hide');
                                            var new_selector = $('<td class="launch_modal" data-id="'+reservation_id+'">Pincha aqui</td>');
                                            new_selector.appendTo("table.launch_modal");
                                            $(new_selector).click();
                                            $(new_selector).remove();
                                        });
                                    </script>
                                    <a class="mr-4 o_pms_pwa_return" t-attf-data-id="{{reservation.id}}" href="#"><i class="fa fa-arrow-left"></i> Volver</a>
                                    <h4 class="modal-title">
                                        Cancelar reserva:
                                        <span t-esc="reservation.name" />
                                    </h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body o_pms_pwa_modal_body">
                            <div class="o_pms_pwa_shadow">
                                <div class="row">
                                    <div class="col-3 align-self-center">
                                        <img t-att-src="'/web/image/pms.reservation/'+reservation.id+'/partner_image_128'" class="img-thumbnail rounded-circle o_pms_pwa_img_rounded_bg" t-att-title="reservation.partner_id.name" t-att-alt="reservation.partner_id.name" width="55" />
                                    </div>
                                    <div class="col-9 ">
                                        <div class="row">
                                            <div class="col-12">
                                                <strong>
                                                    <span class="o_pms_pwa_reservation_name" t-esc="reservation.partner_id.name" />
                                                </strong>
                                            </div>
                                            <div class="col-12" style="margin-top:-0.5rem">
                                                <a t-att-href="'tel:' + reservation.partner_id.mobile">
                                                    <span class="o_pms_pwa_reservation_anchor" t-esc="reservation.partner_id.mobile" />
                                                </a>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="progress mt-2">
                                    <div t-if="reservation.state == 'onboard'" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.checkins_ratio + '%'" t-att-aria-valuenow="reservation.checkins_ratio" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'cancel' or reservation.state == 'done' or reservation.state == 'no_show' or reservation.state ==  'no_checkout'" class="progress-bar bg-light" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &gt; 75" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and 75 &gt; reservation.ratio_checkin_data &gt; 50" class="progress-bar bg-warning" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &lt; 50" class="progress-bar bg-danger" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-else="" class="progress-bar" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div class="mt-4">
                                        <h5>¿Estás seguro de que deseas cancelar esta reserva?</h5>
                                        <p>
                                            <strong>Nombre:</strong>
                                            <t t-esc="reservation.partner_id.name" />
                                        </p>
                                        <p>
                                            <strong>Noches:</strong>
                                            <t t-esc="reservation.nights" />
                                        </p>
                                        <p>
                                            <strong>Adultos:</strong>
                                            <t t-esc="reservation.adults" />
                                        </p>
                                        <p>
                                            <strong>Importe pendiente:</strong>
                                            <t t-esc="reservation.folio_pending_amount" />
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <button type="button" class="btn btn-block o_pms_pwa_btn_border" data-dismiss="modal" aria-label="Close">
                                        <span>Cerrar</span>
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button type="button" t-att-url="'/reservation/' + reservation.id +'/cancel'" class="btn btn-message btn-block o_pms_pwa_button_cancel_confirm" data-dismiss="modal" aria-label="Cancel">
                                        <span>Cancelar Reserva</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- modal-content -->
                </div>
                <!-- modal-dialog -->
            </div>
        </t>
    </t>

    <t t-name="pms_pwa.reservation_payment_modal">
        <t t-if="reservation">
            <div class="modal o_pms_pwa_right fade o_pms_pwa_reservation_modal" tabindex="-1" role="dialog" aria-labelledby="o_pms_pwa_reservation_modal">
                <div class="modal-dialog" role="document" t-att-payment-data-id="reservation.id">
                    <div class="modal-content">
                        <div class="modal-header o_pms_pwa_modal_header">
                            <div class="col-12">
                                <div class="row o_pms_pwa_modal_header_pad">
                                    <script>
                                        $(".o_pms_pwa_return").click(function (event) {
                                            event.preventDefault();
                                            let reservation_id = event.target.getAttribute("data-id");
                                            $("div.o_pms_pwa_new_reservation_modal").modal('hide');
                                            var new_selector = $('<td class="launch_modal" data-id="'+reservation_id+'">Pincha aqui</td>');
                                            new_selector.appendTo("table.launch_modal");
                                            $(new_selector).click();
                                            $(new_selector).remove();
                                        });

                                    </script>
                                    <a class="mr-4 o_pms_pwa_return" t-attf-data-id="{{reservation.id}}" href="#"><i class="fa fa-arrow-left"></i> Volver</a>
                                    <h4 class="modal-title">
                                        Pago de reserva:
                                        <span t-esc="reservation.name" />
                                    </h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body o_pms_pwa_modal_body">
                            <div class="o_pms_pwa_shadow">
                                <div class="row">
                                    <div class="col-3 align-self-center">
                                        <img t-att-src="'/web/image/pms.reservation/'+reservation.id+'/partner_image_128'" class="img-thumbnail rounded-circle o_pms_pwa_img_rounded_bg" t-att-title="reservation.partner_id.name" t-att-alt="reservation.partner_id.name" width="55" />
                                    </div>
                                    <div class="col-9 ">
                                        <div class="row">
                                            <div class="col-12">
                                                <strong>
                                                    <span class="o_pms_pwa_reservation_name" t-esc="reservation.partner_id.name" />
                                                </strong>
                                            </div>
                                            <div class="col-12" style="margin-top:-0.5rem">
                                                <a t-att-href="'tel:' + reservation.partner_id.mobile">
                                                    <span class="o_pms_pwa_reservation_anchor" t-esc="reservation.partner_id.mobile" />
                                                </a>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="progress mt-2">
                                    <div t-if="reservation.state == 'onboard'" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.checkins_ratio + '%'" t-att-aria-valuenow="reservation.checkins_ratio" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'cancel' or reservation.state == 'done' or reservation.state == 'no_show' or reservation.state ==  'no_checkout'" class="progress-bar bg-light" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &gt; 75" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and 75 &gt; reservation.ratio_checkin_data &gt; 50" class="progress-bar bg-warning" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &lt; 50" class="progress-bar bg-danger" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-else="" class="progress-bar" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="form-group form-field mt8">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <label class="control-label col-12" for="payment_method">
                                                Método de pago
                                            </label>
                                            <select class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="payment_method">
                                                <option t-foreach="reservation.payment_methods" t-as="key" t-att-value="key.id">
                                                    <t t-esc="key.name" />
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-sm-12 mt-2">
                                            <label class="control-label col-12" for="date">
                                                Fecha
                                            </label>
                                            <input class="form-control float-left o_pms_pwa_payment_modal_daterangepicker" type="text" name="date" value="" />
                                            <span class="o_pms_pwa_calendar_icon">
                                                <img src="/pms_pwa/static/img/svg/calendario-azul.svg" alt="calendar icon" title="calendar" width="20" />
                                            </span>
                                        </div>
                                        <div class="col-sm-12 mt-2">
                                            <label class="control-label col-12" for="amount">
                                                Importe
                                            </label>
                                            <input class="form-control" type="number" min="0" step="any" name="amount" t-att-value="reservation.folio_pending_amount" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <button type="button" class="btn btn-block o_pms_pwa_btn_border" data-dismiss="modal" aria-label="Close">
                                        <span>Cerrar</span>
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button type="button" class="btn btn-message btn-block o_pms_pwa_button_payment_confirm" data-dismiss="modal" aria-label="Pay">
                                        <span>Pagar</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- modal-content -->
                </div>
                <!-- modal-dialog -->
            </div>
        </t>
    </t>

    <t t-name="pms_pwa.reservation_refund_modal">
        <t t-if="reservation">
            <div class="modal o_pms_pwa_right fade o_pms_pwa_reservation_modal" tabindex="-1" role="dialog" aria-labelledby="o_pms_pwa_reservation_modal">
                <div class="modal-dialog" role="document" t-att-refund-data-id="reservation.id">
                    <div class="modal-content">
                        <div class="modal-header o_pms_pwa_modal_header">
                            <div class="col-12">
                                <div class="row o_pms_pwa_modal_header_pad">
                                    <script>
                                        $(".o_pms_pwa_return").click(function (event) {
                                            event.preventDefault();
                                            let reservation_id = event.target.getAttribute("data-id");
                                            $("div.o_pms_pwa_new_reservation_modal").modal('hide');
                                            var new_selector = $('<td class="launch_modal" data-id="'+reservation_id+'">Pincha aqui</td>');
                                            new_selector.appendTo("table.launch_modal");
                                            $(new_selector).click();
                                            $(new_selector).remove();
                                        });
                                    </script>
                                    <a class="mr-4 o_pms_pwa_return" t-attf-data-id="{{reservation.id}}" href="#"><i class="fa fa-arrow-left"></i> Volver</a>
                                    <h4 class="modal-title">
                                        Devolución de reserva:
                                        <span t-esc="reservation.name" />
                                    </h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body o_pms_pwa_modal_body">
                            <div class="o_pms_pwa_shadow">
                                <div class="row">
                                    <div class="col-3 align-self-center">
                                        <img t-att-src="'/web/image/pms.reservation/'+reservation.id+'/partner_image_128'" class="img-thumbnail rounded-circle o_pms_pwa_img_rounded_bg" t-att-title="reservation.partner_id.name" t-att-alt="reservation.partner_id.name" width="55" />
                                    </div>
                                    <div class="col-9 ">
                                        <div class="row">
                                            <div class="col-12">
                                                <strong>
                                                    <span class="o_pms_pwa_reservation_name" t-esc="reservation.partner_id.name" />
                                                </strong>
                                            </div>
                                            <div class="col-12" style="margin-top:-0.5rem">
                                                <a t-att-href="'tel:' + reservation.partner_id.mobile">
                                                    <span class="o_pms_pwa_reservation_anchor" t-esc="reservation.partner_id.mobile" />
                                                </a>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="progress mt-2">
                                    <div t-if="reservation.state == 'onboard'" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.checkins_ratio + '%'" t-att-aria-valuenow="reservation.checkins_ratio" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'cancel' or reservation.state == 'done' or reservation.state == 'no_show' or reservation.state ==  'no_checkout'" class="progress-bar bg-light" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &gt; 75" class="progress-bar bg-success" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and 75 &gt; reservation.ratio_checkin_data &gt; 50" class="progress-bar bg-warning" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-elif="reservation.state == 'confirm' and reservation.ratio_checkin_data &lt; 50" class="progress-bar bg-danger" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div t-else="" class="progress-bar" role="progressbar" t-att-style="'width:'+ reservation.ratio_checkin_data + '%'" t-att-aria-valuenow="reservation.ratio_checkin_data" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="form-group form-field mt8">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <label class="control-label col-12" for="payment_method">
                                                Método de pago
                                            </label>
                                            <select class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="payment_method">
                                                <option t-foreach="reservation.payment_methods" t-as="key" t-att-value="key.id">
                                                    <t t-esc="key.name" />
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-sm-12 mt-2">
                                            <label class="control-label col-12" for="date">
                                                Fecha
                                            </label>
                                            <input class="form-control float-left o_pms_pwa_payment_modal_daterangepicker" type="text" name="date" t-att-value="today" />
                                            <span class="o_pms_pwa_calendar_icon">
                                                  <img src="/pms_pwa/static/img/svg/calendario-azul.svg" alt="calendar icon" title="calendar" width="20" />
                                            </span>
                                        </div>
                                        <div class="col-sm-12 mt-2">
                                            <label class="control-label col-12" for="amount">
                                                Importe
                                            </label>
                                            <input class="form-control" type="number" min="0" step="any" name="amount" t-att-value="reservation.folio_pending_amount" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <button type="button" class="btn btn-block o_pms_pwa_btn_border" data-dismiss="modal" aria-label="Close">
                                        <span>Cerrar</span>
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button type="button" class="btn btn-message btn-block o_pms_pwa_button_refund_confirm" data-dismiss="modal" aria-label="Refund">
                                        <span>Devolver</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- modal-content -->
                </div>
                <!-- modal-dialog -->
            </div>
        </t>
    </t>

    <t t-name="pms_pwa.reservation_checkin_modal">
        <t t-if="reservation">
            <div class="modal o_pms_pwa_right fade o_pms_pwa_reservation_modal" tabindex="-1" data-backdrop="static" role="dialog" aria-labelledby="o_pms_pwa_reservation_modal">
                <div t-if="reservation.folio_reservations_count > 1" class="o_pms_pwa_multi_reservation_modal">
                    <div class="modal-body o_pms_pwa_modal_body">
                        <table class="table table-condensed" id="multi_reservation_modal_checkin">
                            <thead>
                                <tr>
                                    <th class="o_pms_pwa_theme_color">Reserva</th>
                                    <th class="o_pms_pwa_theme_color">Habitación</th>
                                    <th class="o_pms_pwa_theme_color">Adultos</th>
                                    <th class="o_pms_pwa_theme_color">Entrada - Salida</th>
                                </tr>

                            </thead>
                            <tbody>
                                <t t-foreach="reservation.folio_reservations" t-as="i">
                                    <tr t-attf-data-id="{{ i.id }}" t-att-class='reservation.id == i.id ? "o_pms_pwa_background_grey" : "" '>
                                        <td>
                                            <t t-if="reservation.id == i.id" t-esc="i.name"></t>
                                            <a class="o_pms_pwa_button_checkin_multi_modal" href="#" t-if="reservation.id != i.id" t-attf-id="{{i.id}}" t-attf-data-id="{{i.id}}" t-attf-url="/reservation/{{ i.id }}/checkin">
                                                <t t-esc="i.name"></t>
                                            </a>
                                        </td>
                                        <td>
                                            <select
                                                disabled="disabled" readonly='readonly'
                                                data-select="room_numbers" class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="preferred_room_id">
                                                <option t-foreach="i.room_numbers" t-as="key" t-att-value="key.id" t-att-selected="i.preferred_room_id.id === key.id ? 'selected' : None">
                                                    <t t-esc="key.name" />
                                                </option>
                                            </select>

                                        </td>
                                        <td>
                                            <input
                                                readonly='readonly'
                                                class="form-control" type="text" name="adults" t-att-value="i.adults" />
                                        </td>
                                        <td>
                                            <input readonly='readonly' class="form-control" type="text" name="range_check_date_modal" t-attf-value="{{ i.checkin }} - {{ i.checkout }}" />
                                            <input type="hidden" name="checkin" t-att-value="i.checkin" />
                                            <input type="hidden" name="checkout" t-att-value="i.checkout" />
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header o_pms_pwa_modal_header">
                            <div class="col-12">
                                <div class="row o_pms_pwa_modal_header_pad">
                                    <script>
                                        $(".o_pms_pwa_return").click(function (event) {
                                            event.preventDefault();
                                            let reservation_id = event.target.getAttribute("data-id");
                                            $("div.o_pms_pwa_new_reservation_modal").modal('hide');
                                            var new_selector = $('<td class="launch_modal" data-id="'+reservation_id+'">Pincha aqui</td>');
                                            new_selector.appendTo("table.launch_modal");
                                            $(new_selector).click();
                                            $(new_selector).remove();
                                        });
                                    </script>
                                    <a class="mr-4 o_pms_pwa_return" t-attf-data-id="{{reservation.id}}" href="#"><i class="fa fa-arrow-left"></i> Volver</a>
                                    <h4 class="modal-title">
                                        Checkin reserva:
                                        <span t-esc="reservation.name" />
                                    </h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span class="fa fa-times" />
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body o_pms_pwa_modal_body">
                            <div class="row">
                                <div class="col-12">
                                    <!-- t-attf-onclick="/checkins/pdf/{{reservation.id}}"   class="o_pms_pwa_button_checkin_confirm"-->
                                    <button type="button" t-attf-data-id="{{reservation.id}}" class="o_pms_pwa_button_print_checkin btn btn-message btn-block o_pms_pwa_30w" aria-label="Print checkin">
                                        <span>Imprimir</span>
                                    </button>
                                </div>
                            </div>
                            <div class="bs-stepper" t-att-guest-data-id="reservation.id">
                                <div class="bs-stepper-header" role="tablist">
                                    <!-- your steps here -->
                                    <t t-set="step_counter" t-value="1" />
                                    <t t-foreach="reservation.checkin_partner_ids" t-as="partner_id">
                                        <div class="step" t-att-data-target="'#checkin_partner_'+partner_id">
                                            <button type="button" class="step-trigger" role="tab" t-att-aria-controls="'#checkin_partner_'+partner_id" t-att-id="'checkin_partner_'+partner_id+'-trigger'">
                                                <span t-if="(partner_id_value['state'] == 'onboard') or (partner_id_value['state'] == 'done')" class="bs-stepper-circle o_pms_pwa_done_circle">
                                                    <t t-esc="step_counter" />
                                                </span>
                                                <span t-else="" class="bs-stepper-circle">
                                                    <t t-esc="step_counter" />
                                                </span>
                                            </button>
                                        </div>
                                        <div class="line"></div>
                                        <t t-set="step_counter" t-value="step_counter + 1" />
                                    </t>
                                </div>
                                <div class="bs-stepper-content">
                                    <!-- your steps content here -->
                                    <t t-set="step_counter" t-value="1" />
                                    <t t-foreach="reservation.checkin_partner_ids" t-as="partner">
                                        <div t-att-id="'checkin_partner_'+partner" class="content" role="tabpanel" t-att-aria-labelledby="'checkin_partner_'+partner+'-trigger'">
                                            <div class="form-group form-field mt8">
                                                <input type="hidden" name="guest_id" t-att-value="partner" />
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <label class="control-label col-12" for="document_type">
                                                            Tipo de documento
                                                        </label>
                                                        <select class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="document_type">
                                                            <option value="" t-att-selected="partner_value['document_type'] == false ? 'selected' : None"></option>
                                                            <option value="D" t-att-selected="partner_value['document_type'] == 'D' ? 'selected' : None">
                                                                DNI
                                                            </option>
                                                            <option value="P" t-att-selected="partner_value['document_type'] == 'P' ? 'selected' : None">
                                                                Pasaporte
                                                            </option>
                                                            <option value="C" t-att-selected="partner_value['document_type'] == 'C' ? 'selected' : None">
                                                                Carnet de conducir
                                                            </option>
                                                            <option value="I" t-att-selected="partner_value['document_type'] == 'I' ? 'selected' : None">
                                                                Documento de identificación
                                                            </option>
                                                            <option value="N" t-att-selected="partner_value['document_type'] == 'N' ? 'selected' : None">
                                                                Permiso de residencia española
                                                            </option>
                                                            <option value="X" t-att-selected="partner_value['document_type'] == 'X' ? 'selected' : None">
                                                                Permiso de residencia europea
                                                            </option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="document_number">
                                                            NIF/CIF
                                                        </label>
                                                        <input autocomplete="off" class="form-control" type="text" name="document_number" t-att-value="partner_value['document_number'] ? partner_value['document_number'] : ''" />
                                                    </div>
                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="document_expedition_date">
                                                            Fecha de expdición del documento
                                                        </label>
                                                        <input autocomplete="off" class="form-control o_pms_pwa_daterangepicker" type="text" name="document_expedition_date" t-att-value="partner_value['document_expedition_date'] ? partner_value['document_expedition_date'] : ''" />
                                                        <span class="o_pms_pwa_calendar_icon">
                                                            <!-- <span class="fa fa-calendar" /> -->
                                                            <img src="/pms_pwa/static/img/svg/calendario-azul.svg" alt="calendar icon" title="calendar" width="20" />
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="mobile">
                                                            Móvil
                                                        </label>
                                                        <input autocomplete="off" class="form-control" type="tel" name="mobile" t-att-value="partner_value['mobile'] ? partner_value['mobile'] : ''" />
                                                    </div>

                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="email">
                                                            Email
                                                        </label>
                                                        <input autocomplete="off" class="form-control" type="email" name="email" t-att-value="partner_value['email'] ? partner_value['email'] : ''" />

                                                        <input class="form-control" type="hidden" name="pms_property_id" t-att-value="reservation.pms_property_id.id" />
                                                        <input class="form-control" type="hidden" name="id" t-att-value="partner" />
                                                    </div>
                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="firstname">
                                                            Nombre
                                                        </label>
                                                        <input autocomplete="off" t-att-data-id="partner_value['id']" class="form-control o_pms_pwa_search_partner" type="text" name="firstname" t-att-value="partner_value['firstname'] ? partner_value['firstname'] : ''" />
                                                        <input type="hidden" name="partner_id" t-att-value="partner_value['partner_id'] ? partner_value['partner_id'] : ''" />
                                                    </div>

                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="lastname">
                                                            Primer apellido
                                                        </label>
                                                        <input autocomplete="off" class="form-control" type="text" name="lastname" t-att-value="partner_value['lastname'] ? partner_value['lastname'] : ''" />
                                                    </div>

                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="lastname2">
                                                            Segundo apellido
                                                        </label>
                                                        <input autocomplete="off" class="form-control" type="text" name="lastname2" t-att-value="partner_value['lastname2'] ? partner_value['lastname2'] : ''" />
                                                    </div>

                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="birthdate_date">
                                                            Fecha de nacimiento
                                                        </label>
                                                        <input autocomplete="off" class="form-control o_pms_pwa_daterangepicker" type="text" name="birthdate_date" t-att-value="partner_value['birthdate_date'] ? partner_value['birthdate_date'] : ''" />
                                                        <span class="o_pms_pwa_calendar_icon">
                                                            <!-- <span class="fa fa-calendar" /> -->
                                                            <img src="/pms_pwa/static/img/svg/calendario-azul.svg" alt="calendar icon" title="calendar" width="20" />
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="gender">
                                                            Género
                                                        </label>
                                                        <select class="form-control o_website_form_input o_domain_leaf_operator_select o_input" name="gender">
                                                            <option name="gender" value="" t-att-selected="partner_value['gender'] == false ? 'selected' : None"></option>
                                                            <option name="gender" value="male" t-att-selected="partner_value['gender'] == 'male' ? 'selected' : None">
                                                                Hombre
                                                            </option>
                                                            <option name="gender" value="female" t-att-selected="partner_value['gender'] == 'female' ? 'selected' : None">
                                                                Mujer
                                                            </option>
                                                            <option name="gender" value="other" t-att-selected="partner_value['gender'] == 'other' ? 'selected' : None">
                                                                Otro
                                                            </option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="address">
                                                            Dirección
                                                        </label>
                                                        <input autocomplete="off" t-att-data-id="partner_value['id']" class="form-control" type="text" name="address" placeholder="Dirección" t-att-value="partner_value['address'] ? partner_value['address'] : ''" />
                                                    </div>

                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="zip">
                                                            Cogigo Postal
                                                        </label>
                                                        <input autocomplete="off" t-att-data-id="partner_value['id']" class="form-control" type="text" name="zip" placeholder="C.P." t-att-value="partner_value['zip'] ? partner_value['zip'] : ''" />
                                                    </div>

                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="residence_city">
                                                            Ciudad
                                                        </label>
                                                        <input autocomplete="off" t-att-data-id="partner_value['id']" class="form-control" type="text" name="residence_city" placeholder="Ciudad" t-att-value="partner_value['residence_city'] ? partner_value['residence_city'] : ''" />
                                                    </div>

                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="country_name">
                                                            País
                                                        </label>
                                                        <input autocomplete="off" t-att-data-id="partner_value['id']" class="form-control o_pms_pwa_search_country_name" type="text" name="country_name" placeholder="País" t-att-value="partner_value['country_name'] ? partner_value['country_name'] : ''" />
                                                        <input type="hidden" name="country_id" t-att-value="partner_value['country_id'] ? partner_value['country_id']['id'] : ''" />
                                                    </div>

                                                    <div class="col-sm-12 mt-2">
                                                        <label class="control-label col-12" for="state_name">
                                                            Provincia
                                                        </label>
                                                       <input autocomplete="off" t-att-data-id="partner_value['id']" class="form-control o_pms_pwa_search_state_name" type="text" name="state_name" placeholder="Provincia" t-att-value="partner_value['state_name'] ? partner_value['state_name'] : ''" />
                                                       <input type="hidden" name="residence_state_id" t-att-value="partner_value['residence_state_id'] ? partner_value['residence_state_id']['id'] : ''" />
                                                    </div>
                                                </div>
                                                <!-- <hr t-if="reservation.allowed_segmentations" /> -->
                                                <div class="row" t-if="reservation.allowed_segmentations">
                                                    <div class="col-sm-12 mt-2" >
                                                        <div class="form-group row">
                                                            <div for="segmentation_ids" class="col-sm-4 col-form-label">Motivo del viaje</div>
                                                            <div class="col-sm-8">
                                                                <select id="segmentation_ids" name="segmentation_ids" class="selectpicker" multiple="multiple" data-mdb-clear-button="true" data-live-search="true">
                                                                    <t t-foreach="reservation.allowed_segmentations" t-as="segmentation">
                                                                        <option t-att-value="segmentation.id" t-att-selected="partner_value['segmentation_ids'] and segmentation.id in partner_value['segmentation_ids'] ? 'selected' : None"><t t-esc="segmentation.name"/></option>
                                                                    </t>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-12 mt-2">
                                                        <button type="button" t-attf-data-id="reservation.id" class="btn btn-block o_pms_pwa_btn_border o_pms_pwa_30w float-right" data-dismiss="modal" aria-label="Close">
                                                            <span>Cerrar</span>
                                                        </button>
                                                        <t t-if="partner_value['state'] == 'precheckin'">
                                                            <button type="button" t-attf-data-id="reservation.id" class="btn btn-message btn-block o_pms_pwa_button_checkin_confirm o_pms_pwa_30w o_pms_pwa_checkin_confirm_button" data-dismiss="modal" aria-label="Checkin">
                                                                <span>Checkin</span>
                                                            </button>
                                                        </t>
                                                        <t t-else="">
                                                            <button type="button" disabled="true" t-attf-data-id="reservation.id" class="btn btn-block btn-grey-300 btn-radius o_pms_pwa_disabled o_pms_pwa_30w o_pms_pwa_button_checkin_confirm o_pms_pwa_checkin_confirm_button" data-dismiss="modal" aria-label="Checkin">
                                                                <span>Checkin</span>
                                                            </button>
                                                        </t>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <t t-set="step_counter" t-value="step_counter + 1" />

                                    </t>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!-- modal-content -->
                </div>
                <!-- modal-dialog -->
            </div>
        </t>
    </t>

    <t t-name="pms_pwa.reservation_alerts">
        <t t-if="alert">
            <div t-attf-class="toast show {{ alert['type'] }}" data-autohide="false">
                <div class="toast-header">
                    <strong class="mr-auto">
                        <i class="fa fa-bell"></i>
                    </strong>
                    <button type="button" class="ml-2 mb-1 o_pms_pwa_toast-close close" data-dismiss="toast">
                        <span>x</span>
                    </button>
                </div>
                <div class="toast-body">
                    <t t-esc="alert['message']" />
                </div>
            </div>
        </t>
    </t>


</templates>
